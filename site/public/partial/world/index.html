<div class="row-fluid">
    <!-- Левый верхний угол -->
    <div class="span7">
        <!-- Содержимое клетки -->
        <div id="cell-content" class="span12">
            <!-- NPC -->
            <div class="npcs">
                <div ng-repeat="item in cell.content.npcs"
                     ng-click="selectItem('npc', item.id)"
                     ng-class="{selected: item.id === selectedItem.id && 'npc' === selectedItem.type}"
                     data-id="{{item.id}}"
                     title="{{item.name}}"
                     background-image="/img/world/npcs/{{item.image}}" />
            </div>

            <!-- Персонажи -->
            <div class="characters">
                <div ng-repeat="item in cell.content.characters | filter: {id: '!' + character.id}"
                     ng-click="selectItem('character', item.id)"
                     ng-class="{selected: item.id === selectedItem.id && 'character' === selectedItem.type}"
                     data-id="{{item.id}}"
                     title="{{item.name}}"
                     background-image="/img/world/characters/{{item.image}}" />
            </div>

            <!-- Мобы -->
            <div class="mobs">
                <div ng-repeat="item in cell.content.mobs"
                     ng-click="selectItem('mob', item.id)"
                     ng-class="{selected: item.id === selectedItem.id && 'mob' === selectedItem.type}"
                     data-id="{{item.id}}"
                     title="{{item.name}}"
                     background-image="/img/world/mobs/{{item.image}}" />
            </div>
        </div>

        <div class="row-fluid">
            <!-- Действия -->
            <div id="main-panel" class="span6 with-borders">
                <table>
                    <tbody>
                        <tr>
                            <td>
                                <button id="kill"
                                        ng-class="{disabled: 'mob' !== selectedItem.type}"
                                        class="btn btn-small btn-danger">Убить</button>
                            </td>
                            <td>
                                <button id="talk"
                                        ng-class="{disabled: 'npc' !== selectedItem.type}"
                                        class="btn btn-small btn-success">Общаться</button>
                            </td>
                            <td>
                                <button id="pick-up"
                                        class="btn btn-small btn-warning disabled">Подобрать</button>
                            </td>
                        </tr>
                        <tr>
                            <td><button id="look" class="btn btn-small btn-info disabled">Осмотреть</button></td>
                            <td>&nbsp;</td>
                            <td>&nbsp;</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Информация о локации -->
            <div id="location-info" class="span6 with-borders">
                <table class="table table-condensed">
                    <tbody>
                        <tr>
                            <td>Зона</td>
                            <td>Древний лес</td>
                        </tr>
                        <tr>
                            <td>Локация</td>
                            <td>Около старого дуба</td>
                        </tr>
                        <tr>
                            <td>Координаты</td>
                            <td>{{cell.x}}x{{cell.y}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="top-right" class="span5">
        <!-- Карта -->
        <div class="span12">
            <canvas id="layout" width="350" height="250">Обновите браузер</canvas>

            <div id="right-of-layout">
                <i class="icon-star"></i><br />
                <i class="icon-tag"></i><br />
                <i class="icon-pencil"></i><br />
                <i class="icon-eye-open"></i><br />
                <i class="icon-wrench"></i><br />
                <i class="icon-fullscreen"></i>
            </div>
        </div>

        <!-- Кнопки перемещения -->
        <div class="row-fluid">
            <div id="move-buttons" class="span12">
                <button ng-click="move('top')" id="move-top"><i class="icon-arrow-up"></i></button><br />
                <button ng-click="move('left')" id="move-left"><i class="icon-arrow-left"></i></button>
                <button ng-click="move('right')" id="move-right"><i class="icon-arrow-right"></i></button><br />
                <button ng-click="move('bottom')" id="move-bottom"><i class="icon-arrow-down"></i></button>
            </div>
        </div>
    </div>
</div>

<!-- Чат -->
<div ng-controller="ChatCtrl"
     id="chat"
     class="with-borders">
    <div chat
         ng-style="resize()"
         id="top-part"
         class="row-fluid">
        <div id="messages">
            <table class="table table-condensed table-hover">
                <tbody>
                    <tr ng-repeat="message in chat.messages">
                        <td class="sended">{{message.sended | date: 'H:mm:ss'}}</td>
                        <td class="sender-name">{{message.senderName}}</td>
                        <td>{{message.message}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="members">
            <div id="members-title">
                Пользователи:
            </div>

            <div id="members-list">
                <ul>
                    <li ng-repeat="member in chat.members">{{member.name}}</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="controls" class="row-fluid">
        <div id="message">
            <input ng-model="chat.message"
                   enter="sendMessage(chat.message)"
                   type="text"
                   class="border-box"
                   placeholder="Введите сообщение" />
        </div>

        <div id="send" class="span2">
            <button ng-click="sendMessage(chat.message)"
                    class="btn">Отправить</button>
        </div>
    </div>
</div>
